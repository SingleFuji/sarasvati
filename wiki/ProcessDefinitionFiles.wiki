#summary File format for Process Definitions

= Introduction =
Sarasvati uses an XML file format for process definitions. These files can be loaded into in-memory graph structures and executed, or they can be loaded first into a database, and from there loaded and executed.

= Sarasvati File Format =

=== The XML Schema Definition ===
The process definition file format is defined by an XSD, which can [http://code.google.com/p/sarasvati/source/browse/common/ProcessDefinition.xsd available to view in the project SVN].

=== One Node Example ===

The simplest process definition would be a single node. Graphically, it would look like:

[http://sarasvati.googlecode.com/svn/wiki/images/pdfiles/example1.jpg]

The corresponding XML process definition would look like:

{{{
<?xml version="1.0"?>

<process-definition name="simplest" xmlns="http://sarasvati.googlecode.com/ProcessDefinition">

  <node name="node-one" isStart="true"/>

</process-definition>
}}}

So, line by line:

{{{
<?xml version="1.0"?>
}}}

This is the header which every XML file should have, indicating the version of the XML specification it follows.

{{{
<process-definition name="example1" xmlns="http://sarasvati.googlecode.com/ProcessDefinition">
}}}

The root element of every process Sarasvati definition must be `process-definition`. It has a required `name` element. Every process definition must have a unique name. It also indicates an XML namespace, of `"http://sarasvati.googlecode.com/ProcessDefinition"`.

{{{
  <node name="node-one" isStart="true"/>
}}}

Every process definition must have at least one `node` element defined. Every node must have a name _unique to that file_. Any node may have the `isStart` attribute set. If not specified it will default to false. Note that the `node` element is not prefxied with `sv:` because the namespace has already been established by the root element.

{{{
</process-definition>
}}}

Here, the root element is closed and the process definition is complete.

So, what does the node `start` do? Every node may optionally define a type, via the `type` attribute. If no type is specified, the node type defaults to `node`. This default type just completes the node token and exits via the default arc.

=== Introducing Arcs ===

The following example contains three nodes.

[http://sarasvati.googlecode.com/svn/wiki/images/pdfiles/example2.jpg]

{{{
<?xml version="1.0"?>

<process-definition name="example2" xmlns="http://sarasvati.googlecode.com/ProcessDefinition">

  <node name="node-one" isStart="true">
    <arc to="node-two"/>
    <arc to="node-three"/>
  </node>

  <node name="node-two"/>
  <node name="node-three"/>

</process-definition>
}}}

To indicate an arc, an `arc` element is added to the start node. The `to` attribute indicates the name of the target node. The node with the name must exist in the same process definition file.

=== Join Nodes ===

Here is an example with two start nodes. They both have arcs to `node-three`, which is a join node. It will only execute once both `node-one` and `node-two` have completed.

[http://sarasvati.googlecode.com/svn/wiki/images/pdfiles/example3.jpg]

{{{
<?xml version="1.0"?>

<process-definition name="example3" xmlns="http://sarasvati.googlecode.com/ProcessDefinition">

  <node name="node-one" isStart="true">
    <arc to="node-three"/>
  </node>

  <node name="node-two" isStart="true">
    <arc to="node-three"/>
  </node>

  <node name="node-three" isJoin="true"/>

</process-definition>
}}}