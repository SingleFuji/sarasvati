#summary File format for Process Definitions

= Introduction =
Sarasvati uses an XML file format for process definitions. These files can be loaded into in-memory graph structures and executed, or they can be loaded first into a database, and from there loaded and executed.

= Sarasvati File Format =

=== The XML Schema Definition ===
The process definition file format is defined by an XSD, which can [http://code.google.com/p/sarasvati/source/browse/common/ProcessDefinition.xsd available to view in the project SVN].

=== One Node Example ===

The simplest process definition looks like:

{{{
<?xml version="1.0"?>

<process-definition name="simplest" xmlns="http://sarasvati.googlecode.com/ProcessDefinition">

  <node name="start" isStart="true"/>

</process-definition>
}}}

So, line by line:

{{{
<?xml version="1.0"?>
}}}

This is the header which every XML file should have, indicating the version of the XML specification it follows.

{{{
<process-definition name="example1" xmlns="http://sarasvati.googlecode.com/ProcessDefinition">
}}}

The root element of every process Sarasvati definition must be `process-definition`. It has a required `name` element. Every process definition must have a unique name. It also indicates an XML namespace, of `"http://sarasvati.googlecode.com/ProcessDefinition"`.

{{{
  <node name="one" isStart="true"/>
}}}

Every process definition must have at least one `node` element defined. Every node must have a name _unique to that file_. Any node may have the `isStart` attribute set. If not specified it will default to false. Note that the `node` element is not prefxied with `sv:` because the namespace has already been established by the root element.

{{{
</process-definition>
}}}

Here, the root element is closed and the process definition is complete.

So, what does the node `start` do? Every node may optionally define a type, via the `type` attribute. If no type is specified, the node type defaults to `node`. This default type just completes the node token and exits via the default arc.

=== Introducing Arcs ===

The following example contains three nodes.

{{{
<?xml version="1.0"?>

<process-definition name="example2" xmlns="http://sarasvati.googlecode.com/ProcessDefinition">

  <node name="one" isStart="true">
    <arc to="two"/>
    <arc to="three"/>
  </node>

  <node name="two"/>
  <node name="three"/>

</process-definition>
}}}

To indicate an arc, an `arc` element is added to the start node. The `to` attribute indicates the name of the target node. The node with the name must exist in the same process definition file.

=== Join Nodes ===

{{{
<?xml version="1.0"?>

<process-definition name="example3" xmlns="http://sarasvati.googlecode.com/ProcessDefinition">

  <node name="one" isStart="true">
    <arc to="three"/>
  </node>

  <node name="two" isStart="true">
    <arc to="three"/>
  </node>

  <node name="three" isJoin="true"/>

</process-definition>
}}}

There are two start nodes which both connect to the node named `three`. 

Note that the node with name `three` has the `isJoin` attribute set to true. This declares the node to be a join node. Node `three` will not execute until both nodes `one` and `two` have completed.